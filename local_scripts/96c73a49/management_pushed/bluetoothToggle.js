importClass(android.bluetooth.BluetoothAdapter); var adapter = BluetoothAdapter.getDefaultAdapter(); if (adapter) { var enabled = adapter.isEnabled(); var success = false; try { if (enabled) { success = adapter.disable(); } else { success = adapter.enable(); } } catch(e) { console.error("Standard toggle failed: " + e); } if (!success) { try { var cmd = enabled ? "svc bluetooth disable" : "svc bluetooth enable"; var r = shell(cmd, true); if (r.code == 0) success = true; } catch(e) { console.error("Root toggle failed: " + e); } } console.log(enabled ? "关闭蓝牙" + (success?"成功":"失败") : "开启蓝牙" + (success?"成功":"失败")); }